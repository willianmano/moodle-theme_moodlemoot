define ("theme_moodlemoot/sidebar",["jquery","core/custom_interaction_events","core/log","core/pubsub"],function(a,b,c,d){var f={TOGGLE_REGION:"[data-region=\"sidebar-toggle\"]",TOGGLE_ACTION:".sidebar-toggle",BODY:"body",DRAWER:"nav-sidebar",OVERLAY:"overlay-sidebar"},g=768>a(document).width(),h=function(){if(!a(f.TOGGLE_REGION).length){c.debug("Page is missing a drawer region")}if(!a(f.TOGGLE_ACTION).length){c.debug("Page is missing a drawer toggle link")}var b=a(document.getElementById(f.DRAWER));b.on("mousewheel DOMMouseScroll",this.preventPageScroll);this.registerEventListeners();if(g){this.closeAll()}};h.prototype.closeAll=function(){a(f.TOGGLE_REGION).each(function(b,c){var d=a(c).find(f.TOGGLE_ACTION),e=a(document.getElementById(f.DRAWER)),g=a(document.getElementById(f.OVERLAY));d.attr("aria-expanded","false");e.attr("aria-hidden","true");e.removeClass("active");g.removeClass("active")})};h.prototype.toggleSidebar=function(b){var c=a(b.target),e=a(document.getElementById(f.DRAWER)),g=a(f.BODY),h=a(document.getElementById(f.OVERLAY));g.addClass("drawer-ease");var i="true"==c.attr("aria-expanded");if(!i){e.attr("aria-expanded","true");e.attr("aria-hidden","false");e.addClass("active");e.focus();h.attr("aria-expanded","true");h.attr("aria-hidden","false");h.addClass("active");a(f.TOGGLE_ACTION).each(function(b,c){a(c).attr("aria-expanded","true")})}else{e.attr("aria-expanded","false");e.attr("aria-hidden","true");e.removeClass("active");h.attr("aria-expanded","false");h.attr("aria-hidden","true");h.removeClass("active");a(f.TOGGLE_ACTION).each(function(b,c){a(c).attr("aria-expanded","false")})}d.publish("nav-drawer-toggle-start",i)};h.prototype.preventPageScroll=function(b){var c=b.wheelDelta||b.originalEvent&&b.originalEvent.wheelDelta||-b.originalEvent.detail,d=0<=this.scrollTop+a(this).outerHeight()-this.scrollHeight,e=0>=this.scrollTop;if(0>c&&d||0<c&&e){b.preventDefault()}};h.prototype.registerEventListeners=function(){a(f.TOGGLE_ACTION).each(function(c,d){b.define(a(d),[b.events.activate]);a(d).on(b.events.activate,function(a,b){this.toggleSidebar(b.originalEvent);b.originalEvent.preventDefault()}.bind(this))}.bind(this));a(f.SECTION).click(function(){if(g){this.closeAll()}}.bind(this));a(f.DRAWER).on("webkitTransitionEnd msTransitionEnd transitionend",function(b){var c=a(b.target).closest(f.DRAWER),e="false"==c.attr("aria-hidden");d.publish("nav-drawer-toggle-end",e)})};return{init:function init(){return new h}}});
//# sourceMappingURL=sidebar.min.js.map
